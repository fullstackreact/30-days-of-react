---
page_id: 30-days-of-react/day-28
series: 30-days-of-react
permalink: day-28
day: 28
title: Deployment
description: Today, we'll look through some ready-to-go options so we can get our site up and running. By the end of today, you'll be able to share a link to your running application.
hero_image: /assets/images/series/30-days-of-react/headings/28.jpg
imageUrl:  /assets/images/series/30-days-of-react/headings/28.jpg
dayDir: '28'
introBannerUrl: '/assets/images/series/30-days-of-react/headings/28_wide.jpg'
protectedPreview: true
protectedPreviewLength: 800
protectedPreviewCta: 'partials/series/30-days-of-react/30-days-protected-preview.html'
date: Mon Oct 31 2016 21:29:42 GMT-0700 (PDT)
includeFile: ./../_params.yaml
---

We left off yesterday preparing for our first deployment of our application. We're ready to deploy our application. Now the question is _where_ and _what_ are we going to deploy?

Let's explore...

## What

While deploying a single page application has it's own intricasies, it's similar to deploying a non-single page application. What the end-user's browser requests all need to be available for the browser to request. This means all javascript files, any custom fonts, images, svg, stylesheets, etc. that we use in our application need to be available on a publicly available server.

Webpack takes care of building and packaging our entire application for what we'll need to give the server to send to our clients. This _includes_ any client-side tokens and our production configuration (which we put together yesterday). 

This means we only need to send the contents of the distribution directory webpack put together. In our case, this directory is the `build/` directory. We don't need to send anything else in our project to a remote server. 

Let's use our build system to generate a list of production files we'll want to host. We can run the `npm run build` command to generate these files in the `build/` directory:

```bash
npm run build
```

<img class="wide" src="{{ imagesDir }}/npm-build.jpg" />

## Where

These days we have many options for hosting client-side applications. We'll look at a few options for hosting our application today. Each of the following hosting services have their benefits and drawbacks, which we'll briefly discuss before we actually make a deployment.

There are two possible ways for us to deploy our application. If we are working with a back-end application, we can use the back-end server to host our public application files. For instance, if we were building a rails application, we can send the client-side application directly to the `public/` folder of the rails application. 

This has the benefit of providing additional security in our application as we can verify a request from a client-side application made to the backend to have been generated by the server-side code. One drawback, however is that it can hog network bandwidth to send static files and potentially suck up resources from other clients. 

In this section, we'll work on hosting our client-side only application, which is the second way we can deploy our application. This means we can run/use a server which is specifically designed for hosting static files separate from the back-end server. 

We'll focus on the second method where we are using other services to deploy our client-side application. That is, we'll skip building a back-end and upload our static files to one (or more) of the (non-exhaustive) list of hosting services. 

* [surge.sh](https://surge.sh/)
* [github pages](https://pages.github.com/)
* [heroku](https://www.heroku.com/)
* [AWS S3](https://aws.amazon.com/s3/)
* [Forge](https://getforge.com/)
* [BitBalloon](https://www.bitballoon.com/)
* [Pancake](https://www.pancake.io/)
* ... More

We'll explore a few of these options together. 

## surge.sh

<img class="wide" src="{{ imagesDir }}/surge.jpg" />

[surge.sh](https://surge.sh/) is arguably one of the easiest hosting providers to host our static site with. They provide a way for us to easily and repeatable methods for hosting our sites. 

Let's deploy our application to surge. First, we'll need to install the `surge` command-line tool. We'll use `npm`, like so:

```bash
npm install --global surge
```

With the `surge` tool installed, we can run surge in our local directory and point it to the `build/` directory to tell it to upload the generated files in the `build/` directory.

```bash
surge -p build
```

The surge tool will run and it will upload all of our files to a domain specified by the output of the tool. In the case of the previous run, this uploads our files to the url of [hateful-impulse.surge.sh](http://hateful-impulse.surge.sh/) (or the SSL version at [https://hateful-impulse.surge.sh/](https://hateful-impulse.surge.sh/))

<img class="wide" src="{{ imagesDir }}/surge-deploy.jpg" />

For more information on `surge`, check out their documentation at [https://surge.sh/help/](https://surge.sh/help/).

## Github pages

<img class="wide" src="{{ imagesDir }}/github-pages.jpg" />

[github pages](https://pages.github.com/) is another easy service to deploy our static files to. It's dependent upon using github to host our git files, but is another easy-to-use hosting environment for single page applications. 

We'll need to start by creating our github pages repository on github. With an active account, we can visit the [github.com/new](https://github.com/new) site and create a repository. 

<img class="wide" src="{{ imagesDir }}/github-repo.jpg" />

With this repo, it will redirect us to the repo url. Let's click on the `clone or download` button and find the github git url. Let's copy and paste this to our clipboard and head to our terminal.

<img class="wide" src="{{ imagesDir }}/github-url.jpg" />

In our terminal, let's add this as a remote origin for our git repo. 

Since we haven't created this as a git repo yet, let's initialize the git repo:

```bash
git init
git add -A .
git commit -am "Initial commit"
```

In the root directory of our application, let's add the remote with the following command:

```bash
git remote add github [your git url here]
# From the demo, this will be:
# git remote add origin git@github.com:auser/30-days-of-react-demo.git
```

Next, we'll need to move to a branch called `gh-pages` as github deploys from this branch. We can easily do this by checking out in a new branch using git. Let's also run the generator and tell git that the `build/` directory should be considered the root of our app:

```bash
npm run build
git checkout -B gh-pages
git add -f build
git commit -am "Rebuild website"
git filter-branch -f --prune-empty --subdirectory-filter build
git checkout -
```

<img class="wide" src="{{ imagesDir }}/git-branch.jpg" />

Since github pages does not serve directly from the root, but instead the build folder, we'll need to add a configuration to our `package.json` by setting the `homepage` key to the `package.json` file with our github url. Let's open the `package.json` file and add the "homepage" key:

```javascript
{
  "name": "30days",
  "version": "0.0.1",
  "private": true,
  "homepage": "http://auser.github.io/30-days-of-react-demo",
  // ...
}
```

> ## Hint
> 
> We can modify json files by using the [jq](https://stedolan.github.io/jq/) tool. If you don't have this installed, get it... get it now... It's invaluable
>
> To change the `package.json` file from the command-line, we can use jq, like so:
>
> ```bash
> jq '.homepage = \
>     "http://auser.github.io/30-days-of-react-demo"' \
>     > package.json
> ```

With our pages built, we can generate our application using `npm run build` and push to github from our local `build/` directory.

```bash
git push -f github gh-pages
```

Now we can visit our site at the repo pages url. For instance, the demo site is: [https://auser.github.io/30-days-of-react-demo](https://auser.github.io/30-days-of-react-demo/#).

> ## Future deployments
> 
> We'll need to add this work to a deployment script, so every time we want to release a new version of the site. We'll do more of this tomorrow. To release to github, we'll have to use the following script:
>
> ```bash
> #!/usr/bin/env bash
> git checkout -B gh-pages
> git add -f build
> git commit -am "Rebuild website"
> git filter-branch -f --prune-empty --subdirectory-filter build
> git push -f origin gh-pages
> git checkout -
> ```

For more information on github pages, check out their documentation at [https://help.github.com/categories/github-pages-basics/](https://help.github.com/categories/github-pages-basics/).

## Heroku

<img class="wide" src="{{ imagesDir }}/heroku.jpg" />

[Heroku](https://www.heroku.com/) is a very cool hosting service that allows us to host both static and non-static websites. We might want to deploy a static site to heroku as we may want to move to a dynamic backend at some point, are already comfortable with deploying to heroku, etc. 

To deploy our site to heroku, we'll need an account. We can get one by visiting [https://signup.heroku.com/](https://signup.heroku.com/) to sign up for one. 

We'll also need the [heroku toolbet](https://devcenter.heroku.com/articles/heroku-command-line) as we'll be using the `heroku` command-line tool. 

Finally, we'll need to run `heroku login` to set up credentials for our application:

```bash
heroku login
```

<img class="wide" src="{{ imagesDir }}/heroku-login.jpg" />

Next, we'll need to tell the `heroku` command-line that we have a heroku app. We can do this by calling `heroku apps:create` from the command-line in our project root:

```bash
heroku apps:create
# or with a name
heroku apps:create thirty-days-of-react-demo
```

<img class="wide" src="{{ imagesDir }}/heroku-create.jpg" />

Heroku knows how to run our application thanks to [buildpacks](https://devcenter.heroku.com/articles/buildpacks). We'll need to tell heroku we have a static-file buildpack so it knows to serve our application as a static file/spa. 

We'll need to install the static-files plugin for heroku. This can be easiy install using the `heroku` tool:

```bash
heroku plugins:install heroku-cli-static
```

<img class="wide" src="{{ imagesDir }}/heroku-plugin.jpg" />

We can add the static file buildpack with the following command:

```bash
heroku buildpacks:set https://github.com/hone/heroku-buildpack-static
```

For any configuration updates, we'll need to run the `static:init` command from heroku to generate the necessary `static.json` file:

```bash
heroku static:init
```

<img class="wide" src="{{ imagesDir }}/heroku-static-init.jpg" />

Now we can deploy our static site to heroku using the `git` workflow:

```bash
git push heroku master
# or from a branch, such as the heroku branch
git push heroku heroku:master
```

We've deployed to only three of the hosting providers from the list above. There are many more options for deploying our application, however this is a pretty good start. 

When we deploy our application, we will want to make sure everything is working before we actually send out the application to the world. Tomorrow we'll work on integrating a Continuous integration (CI, for short) server to run our tests before we deploy.
